{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"H:\\\\Flask-Security-Website-master\\\\react-flask-app\\\\src\\\\organis.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport Navi from './components/Navbar';\nimport Footer from './components/Footer';\nimport Home from './pages/Home';\nimport Reports from './pages/Reports';\nimport EachReport from './pages/EachReport';\nimport SignIn from './pages/SignIn';\nimport { Row, Col } from 'react-bootstrap';\nimport './App.css';\n\nfunction App() {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const history = useHistory();\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    getUserInfo();\n    window.history.replaceState({}, document.title, window.location.pathname);\n  }, []);\n\n  const doLogOut = async () => {\n    const resp = await fetch(`${process.env.REACT_APP_API_ENDPOINT}/signout`, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Token ${localStorage.getItem('token')}`\n      }\n    });\n\n    if (resp.ok) {\n      const data = await resp.json();\n\n      if (data.success) {\n        localStorage.clear('token');\n        setUser(null);\n      }\n\n      history.push(\"/\");\n    }\n  };\n\n  const getUserInfo = async () => {\n    const existingToken = localStorage.getItem(\"token\");\n    console.log(existingToken);\n    const resp = await fetch(`${process.env.REACT_APP_API_ENDPOINT}/api/getCurrentUser`, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Token ${existingToken || null}`\n      }\n    });\n    console.log(resp.json());\n\n    if (resp.ok) {\n      const data = await resp.json();\n      localStorage.setItem(\"token\", data.token);\n      setUser(data.user);\n      setLoading(false);\n    } else {\n      localStorage.clear(\"token\");\n      setLoading(false);\n    }\n  };\n\n  if (loading === true) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex justify-content-center align-items-center\",\n    style: {\n      height: '90vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner-border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"sr-only\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 32\n  }, this);\n\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logindiv\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          height: '100vh'\n        },\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: {\n            span: 10\n          },\n          md: {\n            span: 8\n          },\n          lg: {\n            span: 6\n          },\n          className: \"login \",\n          children: /*#__PURE__*/_jsxDEV(SignIn, {\n            user: user,\n            setUser: setUser\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navi, {\n      user: user,\n      doLogOut: doLogOut\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        render: () => /*#__PURE__*/_jsxDEV(Home, {\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/tests/:id\",\n        render: (testsPage = {\n          testsPage\n        }) => /*#__PURE__*/_jsxDEV(Reports, {\n          user: user,\n          ...testsPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 71\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/tests/:test_id/:report_id\",\n        render: (reportPage = {\n          reportPage\n        }) => /*#__PURE__*/_jsxDEV(EachReport, {\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 91\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(App, \"1f+ljTMqu6L1pBwa2w3CRx18+WA=\", false, function () {\n  return [useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["H:/Flask-Security-Website-master/react-flask-app/src/organis.js"],"names":["React","useState","useEffect","Switch","Route","useHistory","Navi","Footer","Home","Reports","EachReport","SignIn","Row","Col","App","user","setUser","history","loading","setLoading","getUserInfo","window","replaceState","document","title","location","pathname","doLogOut","resp","fetch","process","env","REACT_APP_API_ENDPOINT","headers","Authorization","localStorage","getItem","ok","data","json","success","clear","push","existingToken","console","log","setItem","token","height","span","testsPage","reportPage"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Switch, Route, useHistory } from 'react-router-dom'\r\nimport Navi from './components/Navbar';\r\nimport Footer from './components/Footer';\r\nimport Home from './pages/Home';\r\nimport Reports from './pages/Reports'\r\nimport EachReport from './pages/EachReport'\r\nimport SignIn from './pages/SignIn';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport './App.css';\r\n\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null)\r\n  const history = useHistory()\r\n  const [loading, setLoading] = useState(true)\r\n    ;\r\n\r\n  useEffect(() => {\r\n    getUserInfo();\r\n    window.history.replaceState({}, document.title, window.location.pathname);\r\n  }, [])\r\n\r\n  \r\n\r\n  const doLogOut = async () => {\r\n    const resp = await fetch(`${process.env.REACT_APP_API_ENDPOINT}/signout`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Token ${localStorage.getItem('token')}`\r\n      }\r\n    })\r\n    if (resp.ok) {\r\n      const data = await resp.json()\r\n      if (data.success) {\r\n        localStorage.clear('token')\r\n        setUser(null)\r\n      }\r\n    history.push(\"/\")\r\n    }\r\n  }\r\n\r\n  const getUserInfo = async () => {\r\n    const existingToken = localStorage.getItem(\"token\");\r\n    console.log(existingToken)\r\n    const resp = await fetch(`${process.env.REACT_APP_API_ENDPOINT}/api/getCurrentUser`, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Token ${existingToken || null}`\r\n      }\r\n    })\r\n    console.log(resp.json())\r\n    if (resp.ok) {\r\n      const data = await resp.json()\r\n      localStorage.setItem(\"token\", data.token)\r\n      setUser(data.user)\r\n      setLoading(false)\r\n    } else {\r\n      localStorage.clear(\"token\")\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading === true) return <div className=\"d-flex justify-content-center align-items-center\" style={{ height: '90vh' }}>\r\n  <div className=\"spinner-border\" role=\"status\">\r\n      <span className=\"sr-only\">Loading...</span>\r\n  </div>\r\n  </div>\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"logindiv\" >\r\n        <Row style={{ height: '100vh',}}>\r\n          <Col xs={{span: 10 }} md={{span:8 }} lg={{span:6 }} className=\"login \" >\r\n            <SignIn\r\n              user={user}\r\n              setUser={setUser}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </ div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navi\r\n        user={user}\r\n        doLogOut={doLogOut}\r\n      />\r\n      <Switch>\r\n        <Route exact path='/' render={() => <Home \r\n        user={user} />} \r\n        />\r\n\r\n        <Route path = \"/tests/:id\" render={(testsPage={testsPage}) => <Reports \r\n        user={user}\r\n        {...testsPage} />} />\r\n\r\n        <Route path = '/tests/:test_id/:report_id' render={(reportPage = {reportPage}) => <EachReport \r\n        user={user}\r\n        />} \r\n        />\r\n\r\n       \r\n        \r\n      </Switch>    \r\n      <Footer />\r\n      \r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}